{"version":3,"sources":["components/Header.js","components/Pixel.js","components/PixelRow.js","components/PixelGrid.js","utils/shoppingCart.js","components/PixelInfoEditable.js","components/ShoppingCart.js","images/shopping-cart.svg","components/ShoppingCartIndicator.js","components/Footer.js","App.js","reportWebVitals.js","index.js"],"names":["Header","header","text","className","href","target","rel","Pixel","pixelData","activePixel","setActivePixelFunction","pixelSize","useState","color","borderColor","setBorderColor","isActive","x","y","console","log","style","backgroundColor","width","height","padding","borderWidth","borderStyle","onClick","onMouseEnter","onMouseLeave","PixelRow","pixelRowData","map","pixel","PixelGrid","fullPixelData","row","get","JSON","parse","localStorage","getItem","localStorageCart","add","item","currentCartArray","some","i","setItem","stringify","empty","removeItem","PixelInfoEditable","claimPixelsFunction","addToCartFunction","setPixel","advancedColorPickerActive","setAdvancedColorPickerActive","amount","border","type","value","owner","onChange","event","onChangeComplete","hex","note","textAlign","ShoppingCart","contents","checkoutFunction","ShoppingCartIndicator","itemsInCart","id","src","cartImage","alt","Footer","title","stripePromise","loadStripe","BACKEND_URL","process","pixels","App","fetchedPixels","setFetchedPixels","setActivePixel","Set","cartContents","setCartContents","eventData","updateEventData","useEffect","EventSource","onmessage","data","parsedEventData","forEach","axios","then","response","catch","error","length","a","stripe","requestOptions","method","headers","body","fetch","json","session","redirectToCheckout","sessionId","result","message","display","flexFlow","justifyContent","newCart","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.52389300.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nimport './Header.css'\r\n\r\nconst Header = ({ header, text }) => {\r\n    return (\r\n        <div className=\"header\">\r\n            <h1>{ header }</h1>\r\n            <h2>{ text } (<a href=\"https://stripe.com/docs/testing#cards\" target=\"_blank\" rel=\"noreferrer\">more info</a>)</h2>\r\n        </div>\r\n    )\r\n}\r\n  \r\n\r\nexport default Header","import React, { useState } from 'react'\r\n\r\nconst Pixel = ({ pixelData, activePixel, setActivePixelFunction, pixelSize}) => {\r\n    const [ borderColor, setBorderColor ] = useState(pixelData.color)\r\n\r\n    const isActive = () => {\r\n        return (activePixel !== null && (pixelData.x === activePixel.x && pixelData.y === activePixel.y))\r\n            ? true\r\n            : false\r\n    }\r\n\r\n    if (isActive() && borderColor !== '#111') {\r\n        setBorderColor('#111')\r\n    } else {\r\n        //setBorderColor(pixelData.color)\r\n    }\r\n\r\n    if (!isActive() && borderColor === '#111') {\r\n        setBorderColor(pixelData.color)\r\n    }\r\n\r\n    if (pixelData.x === 0 && pixelData.y === 0){\r\n        console.log('isActive', isActive())\r\n    }\r\n    //console.log('pixel borderColor', borderColor)\r\n    return (\r\n        <td \r\n            className=\"pixel\" \r\n            style={{ \r\n                backgroundColor: pixelData.color,\r\n                width: pixelSize,\r\n                height: pixelSize,\r\n                padding: 0,\r\n                borderWidth: '1px',\r\n                borderStyle: 'solid',\r\n                borderColor: borderColor,\r\n                //borderSpacing: 0,\r\n                }}\r\n            onClick={ () => setActivePixelFunction(pixelData) }\r\n            onMouseEnter={ () => {\r\n                if (!isActive()){ setBorderColor('black') }\r\n            }}\r\n            onMouseLeave={ () => { \r\n                if(!isActive()){ setBorderColor(pixelData.color) }\r\n            }}\r\n            >\r\n    \r\n        </td>\r\n    )\r\n}\r\n  \r\n\r\nexport default Pixel","import React from 'react'\r\nimport Pixel from './Pixel'\r\n\r\nconst PixelRow = ({ \r\n    pixelRowData, \r\n    activePixel,\r\n    setActivePixelFunction, \r\n    pixelSize \r\n}) => {\r\n    return (\r\n        <tr className=\"pixelRow\">\r\n            { pixelRowData.map(pixel => <Pixel \r\n                                            key={ pixel.x } \r\n                                            pixelData={ pixel }\r\n                                            activePixel={ activePixel }\r\n                                            setActivePixelFunction={ setActivePixelFunction }\r\n                                            pixelSize={ pixelSize }\r\n                                            />) }\r\n        </tr>\r\n    )\r\n}\r\n  \r\n\r\nexport default PixelRow","import React from 'react'\r\nimport PixelRow from './PixelRow'\r\n\r\nimport './PixelGrid.css'\r\n\r\nconst PixelGrid = ({ \r\n    fullPixelData, \r\n    activePixel,\r\n    setActivePixelFunction, \r\n    pixelSize \r\n}) => {\r\n    console.log('in PixelGrid')\r\n    // console.log(`type of setActivePixelFunction: ${typeof(setActivePixelFunction)}`)\r\n    return (\r\n        <table \r\n            className=\"pixelGrid\"\r\n            >\r\n            <tbody>\r\n                { fullPixelData.map(row => <PixelRow \r\n                                            key={ row[0].y } \r\n                                            pixelRowData={ row }\r\n                                            activePixel={ activePixel }\r\n                                            setActivePixelFunction={ setActivePixelFunction } \r\n                                            pixelSize={ pixelSize }\r\n                                            /> \r\n                ) }\r\n            </tbody>\r\n        </table>\r\n    )\r\n}\r\n  \r\n\r\nexport default PixelGrid","const add = (item) => {\r\n    console.log('adding to local storage cart', item)\r\n    const currentCartArray = get() || []\r\n\r\n    if (!currentCartArray.some(i => (i.x === item.x && i.y === item.y))){\r\n        console.log('cart doesn\\'t contain that, adding')\r\n        localStorage.setItem('cart', JSON.stringify([...currentCartArray, item]))\r\n    } else {\r\n        console.log('duplicate item, not adding')\r\n    }\r\n\r\n    console.log('local storage cart:')\r\n    console.log(get())\r\n}\r\n\r\nconst get = () => {\r\n    return JSON.parse(localStorage.getItem('cart'))\r\n}\r\n\r\nconst empty = () => {\r\n    localStorage.removeItem('cart')\r\n}\r\n\r\n\r\nconst localStorageCart =  { add, get, empty }\r\nexport default localStorageCart\r\n","import React, { useState } from 'react'\r\nimport { TwitterPicker, SketchPicker } from 'react-color'\r\n\r\nimport localStorageCart from '../utils/shoppingCart'\r\n\r\n\r\nconst PixelInfoEditable = ({ \r\n    pixelData, \r\n    claimPixelsFunction,\r\n    addToCartFunction\r\n }) => {\r\n    const [ pixel, setPixel ] = useState(null)\r\n    const [ advancedColorPickerActive, setAdvancedColorPickerActive ] = useState(false)\r\n\r\n    console.log('in PixelInfoEditable')\r\n    console.log('pixelData:', pixelData)\r\n    console.log('pixel:', pixel)\r\n\r\n    if (\r\n        (pixel === null && pixelData !== null) ||\r\n        (pixel !== null && pixel.x !== pixelData.x) ||\r\n        (pixel !== null && pixel.y !== pixelData.y)\r\n        ) {\r\n            setPixel({ ...pixelData, amount: pixelData.amount + 0.05 })\r\n        }\r\n\r\n\r\n    if (pixel && pixel !== null) {\r\n        return (\r\n            <div \r\n                className=\"pixelInfo\" \r\n                style={{ \r\n                    border: '1px solid black',\r\n                    width: '276px',\r\n                    }}\r\n                >\r\n                <h1>Pixel { pixel.x },{ pixel.y }</h1>\r\n                <label>\r\n                    Claimed by:\r\n                    <input \r\n                        type=\"text\"\r\n                        value={ pixel.owner }\r\n                        onChange={ (event) => setPixel({ ...pixel, owner: event.target.value }) }\r\n                        />\r\n                    <br />\r\n                </label>\r\n                <label>\r\n                    Color:\r\n                    <div style={{ \r\n                        backgroundColor: pixel.color,\r\n                        width: '100%',\r\n                        height: '50px',\r\n                        }} />\r\n                    { advancedColorPickerActive\r\n                        ? <SketchPicker\r\n                            color={pixel.color}\r\n                            width='250px'\r\n                            onChangeComplete={ (color, event) => setPixel({ ...pixel, color: color.hex })}\r\n                            />\r\n                        : <TwitterPicker \r\n                            color={pixel.color} \r\n                            onChange={ (color, event) => setPixel({ ...pixel, color: color.hex })}\r\n                            />\r\n                    }\r\n                    <button \r\n                        style={{ width: '100%' }}\r\n                        onClick={ () => setAdvancedColorPickerActive(!advancedColorPickerActive)}\r\n                        >\r\n                        { advancedColorPickerActive\r\n                            ? \"Basic...\"\r\n                            : \"Advanced...\"\r\n                        }\r\n                        </button>\r\n                    {/*\r\n                    <input \r\n                        type=\"text\"\r\n                        value={ pixel.color }\r\n                        onChange={ (event) => setPixel({ ...pixel, color: event.target.value }) }\r\n                        />\r\n                    */}\r\n                        \r\n                    <br />\r\n                </label>\r\n                <label>\r\n                    Note:\r\n                    <input \r\n                        type=\"text\"\r\n                        value={ pixel.note }\r\n                        onChange={ (event) => setPixel({ ...pixel, note: event.target.value }) }\r\n                        />\r\n                    <br />\r\n                </label>\r\n                <label>\r\n                    Claim amount:\r\n                    <input \r\n                        type=\"text\"\r\n                        value={ pixel.amount }\r\n                        style={{ \r\n                            width: '3em',\r\n                            textAlign: 'right',\r\n                            }}\r\n                        onChange={ (event) => setPixel({ ...pixel, amount: event.target.value }) }\r\n                        /> €\r\n                    <br />\r\n                </label>\r\n\r\n                <button onClick={ () => claimPixelsFunction([ pixel ]) }>Claim for { pixel.amount } €</button> \r\n                <button onClick={ () => addToCartFunction(pixel) }>Add to Cart</button> \r\n                \r\n            </div>\r\n        )\r\n    } else {\r\n        return (\r\n            <div className=\"pixelInfo\">\r\n                <p>No pixel selected</p>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n  \r\n\r\nexport default PixelInfoEditable","import React from 'react'\r\n\r\nimport './ShoppingCart.css'\r\n\r\nconst ShoppingCart = ({ contents, checkoutFunction }) => {\r\n    console.log('shopping cart - contents', contents)\r\n    return (\r\n        <div \r\n            className=\"shoppingCart\"\r\n            >\r\n            <h1>Cart</h1>\r\n            { contents.map( item => {\r\n                return (\r\n                    <div \r\n                        className=\"shoppingCartItem\"\r\n                        key={`${item.x}-${item.y}`}\r\n                        >\r\n                        <div>Pixel {item.x}, {item.y}</div>\r\n                        <div>Owner: {item.owner}</div>\r\n                        <div>Color: {item.color}</div>\r\n                        <div>Note: {item.note}</div>\r\n                        <div>Claim amount: {item.amount}</div>\r\n                    </div>\r\n                )\r\n            })}\r\n            <button onClick={ () => checkoutFunction(contents)}>Checkout</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ShoppingCart","export default __webpack_public_path__ + \"static/media/shopping-cart.f0432bbd.svg\";","import React from 'react'\r\n\r\nimport cartImage from '../images/shopping-cart.svg'\r\nimport './ShoppingCartIndicator.css'\r\n\r\nconst ShoppingCartIndicator = ({ itemsInCart }) => {\r\n    if (itemsInCart > 0) {\r\n        return (\r\n            <div id=\"shoppingCartIndicator\">\r\n                <img src={cartImage} id=\"shoppingCartIndicatorImage\" alt=\"Shopping Cart\"/>\r\n                <div id=\"shoppingCartIndicatorCount\">{ itemsInCart }</div>\r\n            </div>\r\n        )\r\n    } else {\r\n        return null\r\n    }\r\n}\r\n  \r\n\r\nexport default ShoppingCartIndicator","import React from 'react'\r\n\r\nimport './Footer.css'\r\n\r\nconst Footer = () => {\r\n    return (\r\n        <div className=\"footer\">\r\n            Copyright © Tomi Javanainen 2021. Shopping cart icon by <a href=\"https://www.freepik.com/\" target=\"_blank\" rel=\"noreferrer\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\" target=\"_blank\" rel=\"noreferrer\">www.flaticon.com</a>.\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Footer","import './App.css';\r\n\r\nimport React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\n\r\nimport Header from './components/Header'\r\nimport PixelGrid from './components/PixelGrid'\r\n// import PixelInfo from './components/PixelInfo'\r\nimport PixelInfoEditable from './components/PixelInfoEditable'\r\n// import SizeAdjuster from './components/SizeAdjuster'\r\nimport ShoppingCart from './components/ShoppingCart'\r\nimport ShoppingCartIndicator from './components/ShoppingCartIndicator'\r\nimport Footer from './components/Footer'\r\n\r\nimport localStorageCart from './utils/shoppingCart'\r\n\r\n\r\nimport { loadStripe } from '@stripe/stripe-js';\r\n\r\n// Make sure to call `loadStripe` outside of a component’s render to avoid\r\n// recreating the `Stripe` object on every render.\r\nconst stripePromise = loadStripe('pk_test_RMqvxnEUv0TbhaRCpLNpNzeF00G9e3C2JE');\r\n\r\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL\r\nconsole.log(`BACKEND_URL is ${BACKEND_URL}`)\r\n\r\nlet pixels = []\r\n\r\nfunction App() {\r\n  const [ fetchedPixels, setFetchedPixels ] = useState(null)\r\n  const [ activePixel, setActivePixel ] = useState(null)\r\n  const [ pixelSize, setPixelSize ] = useState(5)\r\n  // const [ quickCheckout, setQuickCheckout ] = useState(null) // if this contains pixel data then quick checkout is active\r\n  const [ cartContents, setCartContents ] = useState(new Set(localStorageCart.get())) // \r\n  const [eventData, updateEventData] = useState(null);\r\n\r\n  console.log('render')\r\n  // console.log('pixels', pixels)\r\n  // console.log('fetchedPixels', fetchedPixels)\r\n\r\n  useEffect(() => {\r\n    console.log('running effect')\r\n\r\n    const source = new EventSource(`${BACKEND_URL}/events`);\r\n\r\n    source.onmessage = function logEvents(event) {     \r\n        console.log('got event data:', event.data) \r\n        const parsedEventData = JSON.parse(event.data);\r\n        parsedEventData.forEach(pixel => {\r\n          pixels[pixel.y][pixel.x] = pixel\r\n        }\r\n        )\r\n        updateEventData(parsedEventData);\r\n    }\r\n\r\n    // Load pixel data from backend\r\n    axios\r\n      .get(`${BACKEND_URL}/pixels`)\r\n      .then(response => {\r\n        //console.log('effect response', response.data)\r\n        setFetchedPixels(response.data)                \r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n      })\r\n  }, []\r\n  )\r\n\r\n  console.log('event data is', eventData)\r\n\r\n  if (pixels.length === 0 && fetchedPixels !== null) { pixels = fetchedPixels }\r\n\r\n  const addToCart = ( item ) => {\r\n    const newCart = new Set(cartContents)\r\n    newCart.add(item)\r\n    setCartContents(newCart)\r\n    localStorageCart.add(item)\r\n  }\r\n\r\n  const emptyCart = () => {\r\n    setCartContents(new Set())\r\n    localStorageCart.empty()\r\n  }\r\n\r\n  const claimPixelsFunction = async (pixels) => {\r\n    // Get Stripe.js instance\r\n    const stripe = await stripePromise;\r\n\r\n    const requestOptions = { \r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(pixels)\r\n    }\r\n\r\n    // console.log(requestOptions);\r\n    // TODO: EMPTY CART ONLY WHEN RETURNING FROM SUCCESFUL CHECKOUT\r\n    emptyCart()\r\n\r\n    // Call your backend to create the Checkout Session\r\n    const response = await fetch(`${BACKEND_URL}/claim-pixels`, requestOptions);\r\n\r\n    const session = await response.json();\r\n\r\n    // When the customer clicks on the button, redirect them to Checkout.\r\n    const result = await stripe.redirectToCheckout({\r\n      sessionId: session.id,\r\n    });\r\n\r\n    if (result.error) {\r\n      // If `redirectToCheckout` fails due to a browser or network\r\n      // error, display the localized error message to your customer\r\n      // using `result.error.message`.\r\n      console.log(result.error.message);\r\n    }\r\n  }\r\n\r\n  if (fetchedPixels === null) {\r\n    return <h1>Loading...</h1>\r\n  } else {\r\n\r\n    return (\r\n      <div \r\n        className=\"content\"\r\n        style={{ \r\n          display: \"flex\",\r\n          flexFlow: \"row wrap\",\r\n          justifyContent: \"center\",\r\n        }}\r\n        >\r\n        <Header\r\n          header=\"TESTING MODE\"\r\n          text=\"Use card number 4242 4242 4242 4242 for purchases\"\r\n          />\r\n        { /* eventData \r\n          ? <div>{ eventData }</div>\r\n          : <div />\r\n          */\r\n          }\r\n\r\n        { /*\r\n        <SizeAdjuster\r\n          pixelSize={ pixelSize }\r\n          setPixelSize={ setPixelSize }\r\n          />\r\n        */ }\r\n        <PixelGrid \r\n          fullPixelData={pixels} \r\n          activePixel={activePixel}\r\n          setActivePixelFunction={ setActivePixel } \r\n          pixelSize={ pixelSize }\r\n          style={{ border: '1px solid black' }}\r\n          />\r\n\r\n        <div>\r\n        <PixelInfoEditable \r\n          pixelData={ activePixel } \r\n          claimPixelsFunction={ claimPixelsFunction }\r\n          addToCartFunction={ addToCart }\r\n          />\r\n\r\n        <ShoppingCart\r\n          /* convert Set to array for component */\r\n          contents={ [...cartContents] } \r\n          checkoutFunction={ claimPixelsFunction }\r\n          />\r\n        </div>\r\n        <ShoppingCartIndicator itemsInCart={ cartContents.length } />\r\n\r\n        <Footer />\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}